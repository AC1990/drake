<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quickstart • drake</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">drake</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-packages.html">Example: R package download trends</a>
    </li>
    <li>
      <a href="../articles/example-gsp.html">Example: gross state products</a>
    </li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/debug.html">Debugging and testing drake projects</a>
    </li>
    <li>
      <a href="../articles/graph.html">Graphs with drake</a>
    </li>
    <li>
      <a href="../articles/parallelism.html">Parallel computing</a>
    </li>
    <li>
      <a href="../articles/timing.html">Time logging</a>
    </li>
    <li>
      <a href="../articles/storage.html">Storage</a>
    </li>
    <li>
      <a href="../articles/caution.html">Caution</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/wlandau-lilly/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Quickstart</h1>
            <h3 class="subtitle">quickstart example for drake</h3>
                        <h4 class="author">William Michael Landau</h4>
            
            <h4 class="date">2018-01-19</h4>
          </div>

    
    
<div class="contents">
<div class="figure">
<img src="logo-vignettes.png">
</div>
<div id="quick-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-examples" class="anchor"></a>Quick examples</h1>
<p>Inspect and run your project.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(drake)
<span class="kw"><a href="../reference/load_basic_example.html">load_basic_example</a></span>()            <span class="co"># Also (over)writes report.Rmd.</span>
config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_config.html">drake_config</a></span>(my_plan) <span class="co"># Master configuration list</span>
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config)         <span class="co"># Hover, click, drag, zoom, pan.</span>
<span class="kw"><a href="../reference/make.html">make</a></span>(my_plan)                   <span class="co"># Run the workflow.</span>
<span class="kw"><a href="../reference/outdated.html">outdated</a></span>(config)                <span class="co"># Everything is up to date.</span></code></pre></div>
<p>Debug errors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/failed.html">failed</a></span>()                 <span class="co"># Targets that failed in the most recent `make()`</span>
<span class="kw"><a href="../reference/diagnose.html">diagnose</a></span>()               <span class="co"># Targets that failed in any previous `make()`</span>
error &lt;-<span class="st"> </span><span class="kw"><a href="../reference/diagnose.html">diagnose</a></span>(large) <span class="co"># Most recent verbose error log of `large`</span>
<span class="kw">str</span>(error)               <span class="co"># Object of class "error"</span>
error$calls              <span class="co"># Call stack / traceback</span></code></pre></div>
<p>Dive deeper into the built-in examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/drake_example.html">drake_example</a></span>(<span class="st">"basic"</span>) <span class="co"># Write the code files.</span>
<span class="kw"><a href="../reference/drake_examples.html">drake_examples</a></span>()       <span class="co"># List the other examples.</span>
<span class="kw">vignette</span>(<span class="st">"quickstart"</span>) <span class="co"># This vignette</span></code></pre></div>
</div>
<div id="set-up-the-basic-example" class="section level1">
<h1 class="hasAnchor">
<a href="#set-up-the-basic-example" class="anchor"></a>Set up the basic example</h1>
<p>Before you run your project, you need to set up the workspace. In other words, you need to gather the “imports”: functions, pre-loaded data objects, and saved files that you want to be available before the real work begins.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(knitr) <span class="co"># Drake knows which packages you load.</span>
<span class="kw">library</span>(drake)</code></pre></div>
<p>We need a function to simulate datasets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simulate &lt;-<span class="st"> </span>function(n){
  <span class="kw">data.frame</span>(
    <span class="dt">x =</span> stats::<span class="kw">rnorm</span>(n),
    <span class="dt">y =</span> <span class="kw">rpois</span>(n, <span class="dv">1</span>)
  )
}</code></pre></div>
<p>We also need functions to analyze the datasets we simulate.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg1 &lt;-<span class="st"> </span>function(d){
  <span class="kw">lm</span>(y ~<span class="st"> </span>+<span class="st"> </span>x, <span class="dt">data =</span> d)
}

reg2 &lt;-<span class="st"> </span>function(d){
  d$x2 &lt;-<span class="st"> </span>d$x ^<span class="st"> </span><span class="dv">2</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x2, <span class="dt">data =</span> d)
}</code></pre></div>
<p>We want to summarize the final results in an R Markdown report, so we need the following <code>report.Rmd</code> source file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lines &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="st">"---"</span>,
  <span class="st">"title: Example Report"</span>,
  <span class="st">"author: You"</span>,
  <span class="st">"output: html_document"</span>,
  <span class="st">"---"</span>,
  <span class="st">""</span>,
  <span class="st">"Look how I read outputs from the drake cache."</span>,
  <span class="st">"Drake notices that `small`, `coef_regression2_small`,"</span>,
  <span class="st">"and `large` are dependencies of the"</span>,
  <span class="st">"future compiled output report file target, `report.md`."</span>,
  <span class="st">"Just be sure that the workflow plan command for the target `'report.md'`"</span>,
  <span class="st">"has an explicit call to `knit()`, something like `knit('report.Rmd')` or"</span>,
  <span class="st">"`knitr::knit(input = 'report.Rmd', quiet = TRUE)`."</span>,
  <span class="st">""</span>,
  <span class="st">"```{r example_chunk}"</span>,
  <span class="st">"library(drake)"</span>,
  <span class="st">"readd(small)"</span>,
  <span class="st">"readd(coef_regression2_small)"</span>,
  <span class="st">"loadd(large)"</span>,
  <span class="st">"head(large)"</span>,
  <span class="st">"```"</span>)
<span class="kw">writeLines</span>(lines, <span class="st">"report.Rmd"</span>)</code></pre></div>
<p>Now, all our imports are set up. When the real work begins, <code>drake</code> will import functions and data objects from your R session environment</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()
## [1] "lines"    "reg1"     "reg2"     "simulate"</code></pre></div>
<p>and saved files from your file system.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>()
##  [1] "caution.html"           "caution.Rmd"           
##  [3] "debug.html"             "debug.Rmd"             
##  [5] "drake.html"             "drake.Rmd"             
##  [7] "example-gsp_files"      "example-gsp.html"      
##  [9] "example-gsp.Rmd"        "example-packages_files"
## [11] "example-packages.html"  "example-packages.Rmd"  
## [13] "graph.html"             "graph.Rmd"             
## [15] "logo-vignettes.png"     "parallelism.html"      
## [17] "parallelism.Rmd"        "quickstart.Rmd"        
## [19] "report.Rmd"             "storage.Rmd"           
## [21] "timing.Rmd"</code></pre></div>
</div>
<div id="the-workflow-plan-data-frame" class="section level1">
<h1 class="hasAnchor">
<a href="#the-workflow-plan-data-frame" class="anchor"></a>The workflow plan data frame</h1>
<p>Now that your workspace of imports is prepared, we can outline the real work step by step in a workflow plan data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/load_basic_example.html">load_basic_example</a></span>()
## cache /tmp/Rtmp714WXU/articles/.drake
## connect 5 imports: lines, simulate, reg1, my_plan, reg2
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
my_plan
##                    target                                      command
## 1             'report.md'             knit('report.Rmd', quiet = TRUE)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4       regression1_small                                  reg1(small)
## 5       regression1_large                                  reg1(large)
## 6       regression2_small                                  reg2(small)
## 7       regression2_large                                  reg2(large)
## 8  summ_regression1_small suppressWarnings(summary(regression1_small))
## 9  summ_regression1_large suppressWarnings(summary(regression1_large))
## 10 summ_regression2_small suppressWarnings(summary(regression2_small))
## 11 summ_regression2_large suppressWarnings(summary(regression2_large))
## 12 coef_regression1_small              coefficients(regression1_small)
## 13 coef_regression1_large              coefficients(regression1_large)
## 14 coef_regression2_small              coefficients(regression2_small)
## 15 coef_regression2_large              coefficients(regression2_large)</code></pre></div>
<p>Each row is an intermediate step, and each <strong>command</strong> generates a single <strong>target</strong>. A target is an output R object (cached when generated) or an output file (specified with single quotes), and a command just an ordinary piece of R code (not necessarily a single function call). Commands make use of R objects imported from your workspace, targets generated by other commands, and initial input files. These dependencies give your project an underlying network representation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_config.html">drake_config</a></span>(my_plan)
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">width =</span> <span class="st">"100%"</span>, <span class="dt">height =</span> <span class="st">"500px"</span>) <span class="co"># Also drake_graph()</span></code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/bd8a086f/images/outdated.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>You can also check the dependencies of individual targets and imported functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/deps.html">deps</a></span>(reg2)
## [1] "lm"

<span class="kw"><a href="../reference/deps.html">deps</a></span>(my_plan$command[<span class="dv">1</span>]) <span class="co"># Files like report.Rmd are single-quoted.</span>
## [1] "'report.Rmd'"           "coef_regression2_small"
## [3] "knit"                   "large"                 
## [5] "small"

<span class="kw"><a href="../reference/deps.html">deps</a></span>(my_plan$command[<span class="kw">nrow</span>(my_plan)])
## [1] "coefficients"      "regression2_large"</code></pre></div>
<p>List all the reproducibly-tracked objects and files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/tracked.html">tracked</a></span>(my_plan, <span class="dt">targets =</span> <span class="st">"small"</span>)
## connect 5 imports: lines, simulate, reg1, my_plan, reg2
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
## [1] "small"        "simulate"     "data.frame"   "rpois"       
## [5] "stats::rnorm"

<span class="kw"><a href="../reference/tracked.html">tracked</a></span>(my_plan)
## connect 5 imports: lines, simulate, reg1, my_plan, reg2
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
##  [1] "'report.md'"            "small"                 
##  [3] "large"                  "regression1_small"     
##  [5] "regression1_large"      "regression2_small"     
##  [7] "regression2_large"      "summ_regression1_small"
##  [9] "summ_regression1_large" "summ_regression2_small"
## [11] "summ_regression2_large" "coef_regression1_small"
## [13] "coef_regression1_large" "coef_regression2_small"
## [15] "coef_regression2_large" "simulate"              
## [17] "reg1"                   "reg2"                  
## [19] "'report.Rmd'"           "knit"                  
## [21] "summary"                "suppressWarnings"      
## [23] "coefficients"           "data.frame"            
## [25] "rpois"                  "stats::rnorm"          
## [27] "lm"</code></pre></div>
<p>Check for circular reasoning, missing input files, and other pitfalls.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/check_plan.html">check_plan</a></span>(my_plan)
## cache /tmp/Rtmp714WXU/articles/.drake
## connect 5 imports: lines, simulate, reg1, my_plan, reg2
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...</code></pre></div>
</div>
<div id="generate-the-workflow-plan" class="section level1">
<h1 class="hasAnchor">
<a href="#generate-the-workflow-plan" class="anchor"></a>Generate the workflow plan</h1>
<p>The workflow plan data frame <code>my_plan</code> would be a pain to write by hand, so <code>drake</code> has functions to help you.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_datasets &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(
  <span class="dt">small =</span> <span class="kw">simulate</span>(<span class="dv">5</span>),
  <span class="dt">large =</span> <span class="kw">simulate</span>(<span class="dv">50</span>))
my_datasets
##   target      command
## 1  small  simulate(5)
## 2  large simulate(50)</code></pre></div>
<p>For multiple replicates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/expand_plan.html">expand_plan</a></span>(my_datasets, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"rep1"</span>, <span class="st">"rep2"</span>))
##       target      command
## 1 small_rep1  simulate(5)
## 2 small_rep2  simulate(5)
## 3 large_rep1 simulate(50)
## 4 large_rep2 simulate(50)</code></pre></div>
<p>Each dataset is analyzed multiple ways.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">methods &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(
  <span class="dt">regression1 =</span> <span class="kw">reg1</span>(dataset__), <span class="co"># nolint</span>
  <span class="dt">regression2 =</span> <span class="kw">reg2</span>(dataset__)) <span class="co"># nolint</span>
methods
##        target         command
## 1 regression1 reg1(dataset__)
## 2 regression2 reg2(dataset__)</code></pre></div>
<p>We evaluate the <code>dataset__</code> wildcard.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_analyses &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plan_analyses.html">plan_analyses</a></span>(methods, <span class="dt">data =</span> my_datasets)
my_analyses
##              target     command
## 1 regression1_small reg1(small)
## 2 regression1_large reg1(large)
## 3 regression2_small reg2(small)
## 4 regression2_large reg2(large)</code></pre></div>
<p>Next, we summarize each analysis of each dataset using summary statistics and regression coefficients.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_types &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(
  <span class="dt">summ =</span> <span class="kw">suppressWarnings</span>(<span class="kw">summary</span>(analysis__)), <span class="co"># nolint</span>
  <span class="dt">coef =</span> <span class="kw">coefficients</span>(analysis__)) <span class="co"># nolint</span>
summary_types
##   target                               command
## 1   summ suppressWarnings(summary(analysis__))
## 2   coef              coefficients(analysis__)

results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plan_summaries.html">plan_summaries</a></span>(summary_types, <span class="dt">analyses =</span> my_analyses,
  <span class="dt">datasets =</span> my_datasets, <span class="dt">gather =</span> <span class="ot">NULL</span>)
results
##                   target                                      command
## 1 summ_regression1_small suppressWarnings(summary(regression1_small))
## 2 summ_regression1_large suppressWarnings(summary(regression1_large))
## 3 summ_regression2_small suppressWarnings(summary(regression2_small))
## 4 summ_regression2_large suppressWarnings(summary(regression2_large))
## 5 coef_regression1_small              coefficients(regression1_small)
## 6 coef_regression1_large              coefficients(regression1_large)
## 7 coef_regression2_small              coefficients(regression2_small)
## 8 coef_regression2_large              coefficients(regression2_large)</code></pre></div>
<p>The <code>gather</code> feature reduces a collection of targets to a single target. The resulting commands are long, so gathering is deactivated for the sake of readability.</p>
<p>For the dynamic report <code>'report.Rmd'</code>/<code>'report.md'</code>, be sure the file names are single-quoted. Single quotes denote file targets/imports, and double quotes denote literal strings that should not be treated as dependencies. To tell <code>drake</code> to look for the other dependencies of <code>'report.md'</code>, be sure the source file <code>'report.Rmd'</code> exists and <code><a href="http://www.rdocumentation.org/packages/knitr/topics/knit">knit()</a></code> is in the workflow plan command. That way, <code>drake</code> searches the active code chunks in <code>'report.Rmd'</code> for any targets/imports mentioned in calls to <code><a href="../reference/loadd.html">loadd()</a></code> and <code><a href="../reference/readd.html">readd()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">report &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(
  <span class="dt">report.md =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/knit">knit</a></span>(<span class="st">'report.Rmd'</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>), <span class="co"># nolint</span>
  <span class="dt">file_targets =</span> <span class="ot">TRUE</span>, <span class="dt">strings_in_dots =</span> <span class="st">"filenames"</span>)
report
##        target                          command
## 1 'report.md' knit('report.Rmd', quiet = TRUE)</code></pre></div>
<p>Finally, consolidate your workflow using <code>rbind()</code>. Row order does not matter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_plan &lt;-<span class="st"> </span><span class="kw">rbind</span>(report, my_datasets, my_analyses, results)
my_plan
##                    target                                      command
## 1             'report.md'             knit('report.Rmd', quiet = TRUE)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4       regression1_small                                  reg1(small)
## 5       regression1_large                                  reg1(large)
## 6       regression2_small                                  reg2(small)
## 7       regression2_large                                  reg2(large)
## 8  summ_regression1_small suppressWarnings(summary(regression1_small))
## 9  summ_regression1_large suppressWarnings(summary(regression1_large))
## 10 summ_regression2_small suppressWarnings(summary(regression2_small))
## 11 summ_regression2_large suppressWarnings(summary(regression2_large))
## 12 coef_regression1_small              coefficients(regression1_small)
## 13 coef_regression1_large              coefficients(regression1_large)
## 14 coef_regression2_small              coefficients(regression2_small)
## 15 coef_regression2_large              coefficients(regression2_large)</code></pre></div>
</div>
<div id="flexible-workflow-plan-generation" class="section level1">
<h1 class="hasAnchor">
<a href="#flexible-workflow-plan-generation" class="anchor"></a>Flexible workflow plan generation</h1>
<p>If your workflow does not fit the rigid datasets/analyses/summaries framework, consider using functions <code><a href="../reference/expand_plan.html">expand_plan()</a></code>, <code><a href="../reference/evaluate_plan.html">evaluate_plan()</a></code>, and <code><a href="../reference/gather_plan.html">gather_plan()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(<span class="dt">data =</span> <span class="kw">simulate</span>(<span class="dt">center =</span> MU, <span class="dt">scale =</span> SIGMA))
df
##   target                              command
## 1   data simulate(center = MU, scale = SIGMA)

df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_plan.html">expand_plan</a></span>(df, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"rep1"</span>, <span class="st">"rep2"</span>))
df
##      target                              command
## 1 data_rep1 simulate(center = MU, scale = SIGMA)
## 2 data_rep2 simulate(center = MU, scale = SIGMA)

<span class="kw"><a href="../reference/evaluate_plan.html">evaluate_plan</a></span>(df, <span class="dt">wildcard =</span> <span class="st">"MU"</span>, <span class="dt">values =</span> <span class="dv">1</span>:<span class="dv">2</span>)
##        target                             command
## 1 data_rep1_1 simulate(center = 1, scale = SIGMA)
## 2 data_rep1_2 simulate(center = 2, scale = SIGMA)
## 3 data_rep2_1 simulate(center = 1, scale = SIGMA)
## 4 data_rep2_2 simulate(center = 2, scale = SIGMA)

<span class="kw"><a href="../reference/evaluate_plan.html">evaluate_plan</a></span>(df, <span class="dt">wildcard =</span> <span class="st">"MU"</span>, <span class="dt">values =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">expand =</span> <span class="ot">FALSE</span>)
##      target                             command
## 1 data_rep1 simulate(center = 1, scale = SIGMA)
## 2 data_rep2 simulate(center = 2, scale = SIGMA)

<span class="kw"><a href="../reference/evaluate_plan.html">evaluate_plan</a></span>(df, <span class="dt">rules =</span> <span class="kw">list</span>(<span class="dt">MU =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">SIGMA =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>)), <span class="dt">expand =</span> <span class="ot">FALSE</span>)
##      target                           command
## 1 data_rep1 simulate(center = 1, scale = 0.1)
## 2 data_rep2   simulate(center = 2, scale = 1)

<span class="kw"><a href="../reference/evaluate_plan.html">evaluate_plan</a></span>(df, <span class="dt">rules =</span> <span class="kw">list</span>(<span class="dt">MU =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">SIGMA =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>)))
##             target                           command
## 1  data_rep1_1_0.1 simulate(center = 1, scale = 0.1)
## 2    data_rep1_1_1   simulate(center = 1, scale = 1)
## 3   data_rep1_1_10  simulate(center = 1, scale = 10)
## 4  data_rep1_2_0.1 simulate(center = 2, scale = 0.1)
## 5    data_rep1_2_1   simulate(center = 2, scale = 1)
## 6   data_rep1_2_10  simulate(center = 2, scale = 10)
## 7  data_rep2_1_0.1 simulate(center = 1, scale = 0.1)
## 8    data_rep2_1_1   simulate(center = 1, scale = 1)
## 9   data_rep2_1_10  simulate(center = 1, scale = 10)
## 10 data_rep2_2_0.1 simulate(center = 2, scale = 0.1)
## 11   data_rep2_2_1   simulate(center = 2, scale = 1)
## 12  data_rep2_2_10  simulate(center = 2, scale = 10)

<span class="kw"><a href="../reference/gather_plan.html">gather_plan</a></span>(df)
##   target                                            command
## 1 target list(data_rep1 = data_rep1, data_rep2 = data_rep2)

<span class="kw"><a href="../reference/gather_plan.html">gather_plan</a></span>(df, <span class="dt">target =</span> <span class="st">"my_summaries"</span>, <span class="dt">gather =</span> <span class="st">"rbind"</span>)
##         target                                             command
## 1 my_summaries rbind(data_rep1 = data_rep1, data_rep2 = data_rep2)</code></pre></div>
</div>
<div id="run-the-workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#run-the-workflow" class="anchor"></a>Run the workflow</h1>
<p>You may want to check for outdated or missing targets/imports first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_config.html">drake_config</a></span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="../reference/outdated.html">outdated</a></span>(config) <span class="co"># Targets that need to be (re)built.</span>
##  [1] "'report.md'"            "coef_regression1_large"
##  [3] "coef_regression1_small" "coef_regression2_large"
##  [5] "coef_regression2_small" "large"                 
##  [7] "regression1_large"      "regression1_small"     
##  [9] "regression2_large"      "regression2_small"     
## [11] "small"                  "summ_regression1_large"
## [13] "summ_regression1_small" "summ_regression2_large"
## [15] "summ_regression2_small"

<span class="kw"><a href="../reference/missed.html">missed</a></span>(config) <span class="co"># Checks your workspace.</span>
## character(0)</code></pre></div>
<p>Then just <code><a href="../reference/make.html">make(my_plan)</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/make.html">make</a></span>(my_plan)
## cache /tmp/Rtmp714WXU/articles/.drake
## connect 13 imports: lines, report, my_analyses, simulate, reg1, config, my_pl...
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
## check 9 items: 'report.Rmd', coefficients, data.frame, knit, lm, rpois, stats...
## check 3 items: reg1, reg2, simulate
## check 2 items: large, small
## target large
## target small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## target regression1_large
## target regression1_small
## target regression2_large
## target regression2_small
## check 8 items: coef_regression1_large, coef_regression1_small, coef_regressio...
## target coef_regression1_large
## target coef_regression1_small
## target coef_regression2_large
## target coef_regression2_small
## target summ_regression1_large
## target summ_regression1_small
## target summ_regression2_large
## target summ_regression2_small
## check 1 item: 'report.md'
## unload 11 items: regression1_small, regression1_large, regression2_small, reg...
## target 'report.md'</code></pre></div>
<p>The non-file dependencies of your last target are already loaded in your workspace.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()
##  [1] "coef_regression2_small" "config"                
##  [3] "df"                     "large"                 
##  [5] "lines"                  "methods"               
##  [7] "my_analyses"            "my_datasets"           
##  [9] "my_plan"                "reg1"                  
## [11] "reg2"                   "report"                
## [13] "results"                "simulate"              
## [15] "small"                  "summary_types"</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/outdated.html">outdated</a></span>(config) <span class="co"># Everything is up to date.</span>
## character(0)

<span class="kw"><a href="../reference/build_times.html">build_times</a></span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="co"># How long did it take to make each target?</span>
## cache /tmp/Rtmp714WXU/articles/.drake
##                      item   type elapsed   user system
## 1             'report.md' target  0.052s 0.049s 0.002s
## 2            'report.Rmd' import  0.001s 0.001s     0s
## 3  coef_regression1_large target  0.005s 0.005s     0s
## 4  coef_regression1_small target  0.004s 0.004s 0.001s
## 5  coef_regression2_large target  0.005s 0.005s     0s
## 6  coef_regression2_small target  0.005s 0.005s     0s
## 7            coefficients import  0.004s 0.003s     0s
## 8              data.frame import  0.006s 0.006s     0s
## 9                    knit import  0.003s 0.003s     0s
## 10                  large target  0.088s 0.088s     0s
## 11                     lm import  0.004s 0.004s     0s
## 12                   reg1 import  0.001s 0.001s     0s
## 13                   reg2 import  0.001s 0.002s     0s
## 14      regression1_large target  0.008s 0.008s     0s
## 15      regression1_small target  0.006s 0.005s 0.001s
## 16      regression2_large target  0.006s 0.006s     0s
## 17      regression2_small target  0.006s 0.006s     0s
## 18                  rpois import  0.003s 0.004s     0s
## 19               simulate import  0.001s 0.001s     0s
## 20                  small target  0.035s 0.036s     0s
## 21           stats::rnorm import  0.004s 0.003s     0s
## 22 summ_regression1_large target  0.007s 0.006s     0s
## 23 summ_regression1_small target  0.005s 0.005s     0s
## 24 summ_regression2_large target  0.005s 0.006s     0s
## 25 summ_regression2_small target  0.005s 0.004s 0.001s
## 26                summary import  0.005s 0.003s 0.001s
## 27       suppressWarnings import  0.004s 0.005s     0s</code></pre></div>
<p>See also <code><a href="../reference/predict_runtime.html">predict_runtime()</a></code> and <code><a href="../reference/rate_limiting_times.html">rate_limiting_times()</a></code>.</p>
<p>In the new graph, the black nodes from before are now green.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">width =</span> <span class="st">"100%"</span>, <span class="dt">height =</span> <span class="st">"500px"</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/bd8a086f/images/built.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>Optionally, get <a href="http://datastorm-open.github.io/visNetwork/">visNetwork</a> nodes and edges so you can make your own plot with <code>visNetwork()</code> or <code><a href="../reference/render_drake_graph.html">render_drake_graph()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/dataframes_graph.html">dataframes_graph</a></span>(config)</code></pre></div>
<p>Use <code><a href="../reference/readd.html">readd()</a></code> and <code><a href="../reference/loadd.html">loadd()</a></code> to load targets into your workspace. (They are cached in the hidden <code>.drake/</code> folder using <a href="https://CRAN.R-project.org/package=storr">storr</a>). There are many more functions for interacting with the cache.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/readd.html">readd</a></span>(coef_regression2_large)
## cache /tmp/Rtmp714WXU/articles/.drake
## (Intercept)          x2 
##   0.9087718   0.1511359

<span class="kw"><a href="../reference/loadd.html">loadd</a></span>(small)
## cache /tmp/Rtmp714WXU/articles/.drake

<span class="kw">head</span>(small)
##             x y
## 1 -0.77124983 2
## 2  1.34956571 1
## 3 -0.07091655 0
## 4  0.66014726 0
## 5 -1.04635955 2

<span class="kw">rm</span>(small)
<span class="kw"><a href="../reference/cached.html">cached</a></span>(small, large)
## cache /tmp/Rtmp714WXU/articles/.drake
## small large 
##  TRUE  TRUE

<span class="kw"><a href="../reference/cached.html">cached</a></span>()
## cache /tmp/Rtmp714WXU/articles/.drake
##  [1] "'report.md'"            "'report.Rmd'"          
##  [3] "coef_regression1_large" "coef_regression1_small"
##  [5] "coef_regression2_large" "coef_regression2_small"
##  [7] "coefficients"           "data.frame"            
##  [9] "knit"                   "large"                 
## [11] "lm"                     "reg1"                  
## [13] "reg2"                   "regression1_large"     
## [15] "regression1_small"      "regression2_large"     
## [17] "regression2_small"      "rpois"                 
## [19] "simulate"               "small"                 
## [21] "stats::rnorm"           "summ_regression1_large"
## [23] "summ_regression1_small" "summ_regression2_large"
## [25] "summ_regression2_small" "summary"               
## [27] "suppressWarnings"

<span class="kw"><a href="../reference/built.html">built</a></span>()
## cache /tmp/Rtmp714WXU/articles/.drake
##  [1] "'report.md'"            "coef_regression1_large"
##  [3] "coef_regression1_small" "coef_regression2_large"
##  [5] "coef_regression2_small" "large"                 
##  [7] "regression1_large"      "regression1_small"     
##  [9] "regression2_large"      "regression2_small"     
## [11] "small"                  "summ_regression1_large"
## [13] "summ_regression1_small" "summ_regression2_large"
## [15] "summ_regression2_small"

<span class="kw"><a href="../reference/imported.html">imported</a></span>()
## cache /tmp/Rtmp714WXU/articles/.drake
##  [1] "'report.Rmd'"     "coefficients"     "data.frame"      
##  [4] "knit"             "lm"               "reg1"            
##  [7] "reg2"             "rpois"            "simulate"        
## [10] "stats::rnorm"     "summary"          "suppressWarnings"

<span class="kw">head</span>(<span class="kw"><a href="../reference/read_drake_plan.html">read_drake_plan</a></span>())
## cache /tmp/Rtmp714WXU/articles/.drake
##              target                          command
## 1       'report.md' knit('report.Rmd', quiet = TRUE)
## 2             small                      simulate(5)
## 3             large                     simulate(50)
## 4 regression1_small                      reg1(small)
## 5 regression1_large                      reg1(large)
## 6 regression2_small                      reg2(small)

<span class="kw">head</span>(<span class="kw"><a href="../reference/progress.html">progress</a></span>()) <span class="co"># See also in_progress()</span>
## cache /tmp/Rtmp714WXU/articles/.drake
##            'report.md'           'report.Rmd' coef_regression1_large 
##             "finished"             "finished"             "finished" 
## coef_regression1_small coef_regression2_large coef_regression2_small 
##             "finished"             "finished"             "finished"

<span class="kw"><a href="../reference/progress.html">progress</a></span>(large)
## cache /tmp/Rtmp714WXU/articles/.drake
##      large 
## "finished"

<span class="co"># drake_session() # sessionInfo() of the last make() # nolint</span></code></pre></div>
<p>The next time you run <code><a href="../reference/make.html">make(my_plan)</a></code>, nothing will build because <code>drake</code> knows everything is already up to date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make.html">make</a></span>(my_plan) <span class="co"># Will use config later. See also drake_config().</span>
## cache /tmp/Rtmp714WXU/articles/.drake
## Unloading targets from environment:
##   large
##   coef_regression2_small
## connect 13 imports: reg1, df, reg2, my_plan, results, my_analyses, simulate, ...
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
## check 9 items: 'report.Rmd', coefficients, data.frame, knit, lm, rpois, stats...
## check 3 items: reg1, reg2, simulate
## check 2 items: large, small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## check 8 items: coef_regression1_large, coef_regression1_small, coef_regressio...
## check 1 item: 'report.md'
## All targets are already up to date.</code></pre></div>
<p>But if you change one of your functions, commands, or other dependencies, drake will update the affected targets. Suppose we change the quadratic term to a cubic term in <code>reg2()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span>function(d) {
  d$x3 &lt;-<span class="st"> </span>d$x ^<span class="st"> </span><span class="dv">3</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d)
}</code></pre></div>
<p>The targets that depend on <code>reg2()</code> need to be rebuilt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/outdated.html">outdated</a></span>(config)
## check 9 items: 'report.Rmd', coefficients, data.frame, knit, lm, rpois, stats...
## check 3 items: reg1, reg2, simulate
## check 2 items: large, small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## check 4 items: coef_regression1_large, coef_regression1_small, summ_regressio...
## [1] "'report.md'"            "coef_regression2_large"
## [3] "coef_regression2_small" "regression2_large"     
## [5] "regression2_small"      "summ_regression2_large"
## [7] "summ_regression2_small"</code></pre></div>
<p><strong>Advanced</strong>: To find out why a target is out of date, you can load the <a href="https://github.com/richfitz/storr">storr</a> cache and compare the appropriate hash keys to the output of <code><a href="../reference/dependency_profile.html">dependency_profile()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/dependency_profile.html">dependency_profile</a></span>(<span class="dt">target =</span> <span class="st">"regression2_small"</span>, <span class="dt">config =</span> config)
## $cached_command
## [1] "{\n reg2(small) \n}"
## 
## $current_command
## [1] "{\n reg2(small) \n}"
## 
## $cached_file_modification_time
## NULL
## 
## $cached_dependency_hash
## [1] "132333b7b600b356e21ddefcd8d3135bd5cefd8c696665f4e437d2883cc620d9"
## 
## $current_dependency_hash
## [1] "b346d1e695a02d1f0fc3787f3aefbd40b0a5a92ea17cd63ab16fd9c1b9199e23"
## 
## $hashes_of_dependencies
##               reg2              small 
## "d47109544c89ca7a" "7b4e618b51604d54"

config$cache$<span class="kw">get_hash</span>(<span class="dt">key =</span> <span class="st">"small"</span>) <span class="co"># same</span>
## [1] "7b4e618b51604d54"

config$cache$<span class="kw">get_hash</span>(<span class="dt">key =</span> <span class="st">"reg2"</span>) <span class="co"># different</span>
## [1] "d8a21f69778702a8"</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="co"># Same as drake_graph():</span>
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">width =</span> <span class="st">"100%"</span>, <span class="dt">height =</span> <span class="st">"500px"</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/bd8a086f/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>The next <code><a href="../reference/make.html">make()</a></code> will rebuild the targets depending on <code>reg2()</code> and leave everything else alone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/make.html">make</a></span>(my_plan)
## cache /tmp/Rtmp714WXU/articles/.drake
## connect 13 imports: reg1, df, reg2, my_plan, results, my_analyses, simulate, ...
## connect 15 targets: 'report.md', small, large, regression1_small, regression1...
## check 9 items: 'report.Rmd', coefficients, data.frame, knit, lm, rpois, stats...
## check 3 items: reg1, reg2, simulate
## check 2 items: large, small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## check 4 items: coef_regression1_large, coef_regression1_small, summ_regressio...
## load 2 items: large, small
## target regression2_large
## target regression2_small
## check 4 items: coef_regression2_large, coef_regression2_small, summ_regressio...
## target coef_regression2_large
## target coef_regression2_small
## target summ_regression2_large
## target summ_regression2_small
## check 1 item: 'report.md'
## unload 5 items: regression2_small, regression2_large, summ_regression2_small,...
## target 'report.md'</code></pre></div>
<p>Trivial changes to whitespace and comments are totally ignored.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span>function(d) {
  d$x3 &lt;-<span class="st"> </span>d$x ^<span class="st"> </span><span class="dv">3</span>
    <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d) <span class="co"># I indented here.</span>
}
<span class="kw"><a href="../reference/outdated.html">outdated</a></span>(config) <span class="co"># Everything is up to date.</span>
## check 9 items: 'report.Rmd', coefficients, data.frame, knit, lm, rpois, stats...
## check 3 items: reg1, reg2, simulate
## check 2 items: large, small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## check 8 items: coef_regression1_large, coef_regression1_small, coef_regressio...
## check 1 item: 'report.md'
## character(0)</code></pre></div>
<p>Need to add new work on the fly? Just append rows to the workflow plan. If the rest of your workflow is up to date, only the new work is run.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_simulation &lt;-<span class="st"> </span>function(n){
  <span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">rnorm</span>(n), <span class="dt">y =</span> <span class="kw">rnorm</span>(n))
}

additions &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_plan.html">drake_plan</a></span>(
  <span class="dt">new_data =</span> <span class="kw">new_simulation</span>(<span class="dv">36</span>) +<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">10</span>))
additions
##     target                       command
## 1 new_data new_simulation(36) + sqrt(10)

my_plan &lt;-<span class="st"> </span><span class="kw">rbind</span>(my_plan, additions)
my_plan
##                    target                                      command
## 1             'report.md'             knit('report.Rmd', quiet = TRUE)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4       regression1_small                                  reg1(small)
## 5       regression1_large                                  reg1(large)
## 6       regression2_small                                  reg2(small)
## 7       regression2_large                                  reg2(large)
## 8  summ_regression1_small suppressWarnings(summary(regression1_small))
## 9  summ_regression1_large suppressWarnings(summary(regression1_large))
## 10 summ_regression2_small suppressWarnings(summary(regression2_small))
## 11 summ_regression2_large suppressWarnings(summary(regression2_large))
## 12 coef_regression1_small              coefficients(regression1_small)
## 13 coef_regression1_large              coefficients(regression1_large)
## 14 coef_regression2_small              coefficients(regression2_small)
## 15 coef_regression2_large              coefficients(regression2_large)
## 16               new_data                new_simulation(36) + sqrt(10)

<span class="kw"><a href="../reference/make.html">make</a></span>(my_plan)
## cache /tmp/Rtmp714WXU/articles/.drake
## Unloading targets from environment:
##   small
##   large
##   coef_regression2_small
## connect 15 imports: reg1, df, reg2, my_plan, results, my_analyses, simulate, ...
## connect 16 targets: 'report.md', small, large, regression1_small, regression1...
## check 11 items: 'report.Rmd', coefficients, data.frame, knit, lm, rnorm, rpoi...
## check 4 items: new_simulation, reg1, reg2, simulate
## check 3 items: large, new_data, small
## check 4 items: regression1_large, regression1_small, regression2_large, regre...
## check 8 items: coef_regression1_large, coef_regression1_small, coef_regressio...
## check 1 item: 'report.md'
## target new_data</code></pre></div>
<p>If you ever need to erase your work, use <code><a href="../reference/clean.html">clean()</a></code>. The next <code><a href="../reference/make.html">make()</a></code> will rebuild any cleaned targets, so be careful. You may notice that by default, the size of the cache does not go down very much. To purge old data, you could use <code><a href="../reference/clean.html">clean(garbage_collection = TRUE, purge = TRUE)</a></code>. To do garbage collection without removing any important targets, use <code><a href="../reference/drake_gc.html">drake_gc()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Uncaches individual targets and imported objects.</span>
<span class="kw"><a href="../reference/clean.html">clean</a></span>(small, reg1, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="../reference/clean.html">clean</a></span>(<span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Cleans all targets out of the cache.</span>
<span class="kw"><a href="../reference/drake_gc.html">drake_gc</a></span>(<span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Just garbage collection.</span>
<span class="kw"><a href="../reference/clean.html">clean</a></span>(<span class="dt">destroy =</span> <span class="ot">TRUE</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># removes the cache entirely</span></code></pre></div>
</div>
<div id="automatic-watching-for-changed-dependencies" class="section level1">
<h1 class="hasAnchor">
<a href="#automatic-watching-for-changed-dependencies" class="anchor"></a>Automatic watching for changed dependencies</h1>
<p>As you have seen with <code>reg2()</code>, <code>drake</code> reacts to changes in dependencies. In other words, <code><a href="../reference/make.html">make()</a></code> notices when your dependencies are different from last time, rebuilds any affected targets, and continues downstream. In particular, <code>drake</code> watches for nontrivial changes to the following.</p>
<ol style="list-style-type: decimal">
<li>Other imported functions, whether user-defined or from packages.</li>
<li>For imported functions from your environment, any nested functions also in your environment or from packages.</li>
<li>Commands in your workflow plan data frame.</li>
<li>Global variables mentioned in the commands or imported functions.</li>
<li>The output values of upstream targets.</li>
<li>For <a href="https://yihui.name/knitr/">dynamic knitr reports</a> generated with the right commands, targets and imports mentioned in calls to <code><a href="../reference/readd.html">readd()</a></code> and <code><a href="../reference/loadd.html">loadd()</a></code> in the code chunks to be evaluated. <code>Drake</code> treats these targets and imports as dependencies of the compiled output target (say, <code>'report.md'</code> or <code>report.html</code>). **To activate this feature, the command in your workflow plan data frame must call <code><a href="http://www.rdocumentation.org/packages/knitr/topics/knit">knitr::knit()</a></code> or <code><a href="http://www.rdocumentation.org/packages/rmarkdown/topics/render">rmarkdown::render()</a></code>. Examples of acceptable commands:
<ul>
<li><code><a href="http://www.rdocumentation.org/packages/knitr/topics/knit">knit('report.Rmd')</a></code></li>
<li><code><a href="http://www.rdocumentation.org/packages/knitr/topics/knit">knitr::knit(input = 'report.Rmd', quiet = TRUE)</a></code></li>
<li><code>render('report.Rmd')</code></li>
<li><code>rmarkdown::('report.Rmd', output_file = "report.html")</code></li>
</ul>
</li>
</ol>
<p>To enhance reproducibility beyond the scope of drake, you might consider <a href="https://rstudio.github.io/packrat">packrat</a> and <a href="https://www.docker.com/">Docker</a>. <a href="https://rstudio.github.io/packrat">Packrat</a> creates a tightly-controlled local library of packages to extend the shelf life of your project. And with <a href="https://www.docker.com/">Docker</a>, you can execute your project on a <a href="https://en.wikipedia.org/wiki/Virtual_machine">virtual machine</a> to ensure platform independence. Together, <a href="https://rstudio.github.io/packrat">packrat</a> and <a href="https://www.docker.com/">Docker</a> can help others reproduce your work even if they have different software and hardware.</p>
</div>
<div id="need-more-speed" class="section level1">
<h1 class="hasAnchor">
<a href="#need-more-speed" class="anchor"></a>Need more speed?</h1>
<p><code>Drake</code> has extensive high-performance computing support, from local multicore processing to serious distributed computing across multiple nodes of a cluster. See the <a href="https://github.com/wlandau-lilly/drake/blob/master/vignettes/parallelism.Rmd">parallelism vignette</a> for detailed instructions.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#quick-examples">Quick examples</a></li>
      <li><a href="#set-up-the-basic-example">Set up the basic example</a></li>
      <li><a href="#the-workflow-plan-data-frame">The workflow plan data frame</a></li>
      <li><a href="#generate-the-workflow-plan">Generate the workflow plan</a></li>
      <li><a href="#flexible-workflow-plan-generation">Flexible workflow plan generation</a></li>
      <li><a href="#run-the-workflow">Run the workflow</a></li>
      <li><a href="#automatic-watching-for-changed-dependencies">Automatic watching for changed dependencies</a></li>
      <li><a href="#need-more-speed">Need more speed?</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
