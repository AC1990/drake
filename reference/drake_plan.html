<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a workflow plan data frame
for the <code>plan</code> argument of <code><a href='make.html'>make()</a></code>. — drake_plan • drake</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">drake</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/example-packages.html">Example: R package download trends</a>
    </li>
    <li>
      <a href="../articles/example-gsp.html">Example: gross state products</a>
    </li>
    <li>
      <a href="../articles/example-basic.html">Basic example</a>
    </li>
    <li>
      <a href="../articles/best-practices.html">General best practices for drake projects</a>
    </li>
    <li>
      <a href="../articles/debug.html">Debugging and testing drake projects</a>
    </li>
    <li>
      <a href="../articles/graph.html">Graphs with drake</a>
    </li>
    <li>
      <a href="../articles/parallelism.html">Parallel computing</a>
    </li>
    <li>
      <a href="../articles/timing.html">Time logging</a>
    </li>
    <li>
      <a href="../articles/storage.html">Storage</a>
    </li>
    <li>
      <a href="../articles/caution.html">Caution</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a workflow plan data frame
for the <code>plan</code> argument of <code><a href='make.html'>make()</a></code>.</h1>
    </div>

    
    <p>Turns a named collection of target/command pairs into
a workflow plan data frame for <code><a href='make.html'>make()</a></code> and
<code><a href='check.html'>check()</a></code>. You can give the commands
as named expressions, or you can use the <code>list</code>
argument to supply them as character strings.</p>
    

    <pre class="usage"><span class='fu'>drake_plan</span>(<span class='no'>...</span>, <span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>character</span>(<span class='fl'>0</span>), <span class='kw'>file_targets</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>strings_in_dots</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"filenames"</span>, <span class='st'>"literals"</span>), <span class='kw'>tidy_evaluation</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>A collection of symbols/targets
with commands assigned to them. See the examples for details.</p></td>
    </tr>
    <tr>
      <th>list</th>
      <td><p>A named list of targets, where the values
are commands.</p></td>
    </tr>
    <tr>
      <th>file_targets</th>
      <td><p>logical, whether the targets should be
(single-quoted) external file targets.</p></td>
    </tr>
    <tr>
      <th>strings_in_dots</th>
      <td><p>Character scalar,
how to treat quoted character strings in the commands
specified through <code>...</code>.
Set to <code>"filenames"</code> to treat all these strings as
external file targets/imports (single-quoted),
or to <code>"literals"</code> to treat them all as literal
strings (double-quoted).
Unfortunately, because of how R deparses code,
you cannot simply leave literal quotes alone in the
<code>...</code> argument. R will either convert all these quotes
to single quotes or double quotes. Literal quotes in the
<code>list</code> argument are left alone.</p></td>
    </tr>
    <tr>
      <th>tidy_evaluation</th>
      <td><p>logical, whether to use tidy evaluation
such as quasiquotation
when evaluating commands passed through the free-form
<code>...</code> argument.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame of targets and commands.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A workflow plan data frame is a data frame
with a <code>target</code> column and a <code>command</code> column.
Targets are the objects and files that drake generates,
and commands are the pieces of R code that produce them.</p>
<p>For file inputs and targets, drake uses single quotes.
Double quotes are reserved for ordinary strings.
The distinction is important because drake thinks about
how files, objects, targets, etc. depend on each other.
Quotes in the <code>list</code> argument are left alone,
but R messes with quotes when it parses the free-form
arguments in <code>...</code>, so use the <code>strings_in_dots</code>
argument to control the quoting in <code>...</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create example workflow plan data frames for make()</span>
<span class='fu'>drake_plan</span>(<span class='kw'>small</span> <span class='kw'>=</span> <span class='fu'>simulate</span>(<span class='fl'>5</span>), <span class='kw'>large</span> <span class='kw'>=</span> <span class='fu'>simulate</span>(<span class='fl'>50</span>))</div><div class='output co'>#&gt;   target      command
#&gt; 1  small  simulate(5)
#&gt; 2  large simulate(50)</div><div class='input'><span class='co'># Commands can be multi-line code chunks.</span>
<span class='no'>small_plan</span> <span class='kw'>&lt;-</span> <span class='fu'>drake_plan</span>(
  <span class='kw'>small_target</span> <span class='kw'>=</span> {
    <span class='no'>local_object</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span> + <span class='fl'>1</span>
    <span class='fl'>2</span> + <span class='fu'>sqrt</span>(<span class='no'>local_object</span>)
  }
)
<span class='no'>small_plan</span></div><div class='output co'>#&gt;         target                                                     command
#&gt; 1 small_target {\n    local_object &lt;- 1 + 1\n    2 + sqrt(local_object)\n}</div><div class='input'><span class='no'>cache</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>storr</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/storr/topics/storr_environment'>storr_environment</a></span>() <span class='co'># Avoid writing files in examples.</span>
<span class='fu'><a href='make.html'>make</a></span>(<span class='no'>small_plan</span>, <span class='kw'>cache</span> <span class='kw'>=</span> <span class='no'>cache</span>) <span class='co'># Most users don't need the cache argument.</span></div><div class='output co'>#&gt; <span class='message'>connect 2 imports: small_plan, cache</span></div><div class='output co'>#&gt; <span class='message'>connect 1 target: small_target</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: methods</span></div><div class='output co'>#&gt; <span class='message'>check 1 item: sqrt</span></div><div class='output co'>#&gt; <span class='message'>check 1 item: small_target</span></div><div class='output co'>#&gt; <span class='message'>target small_target</span></div><div class='input'><span class='fu'><a href='cached.html'>cached</a></span>(<span class='kw'>cache</span> <span class='kw'>=</span> <span class='no'>cache</span>)</div><div class='output co'>#&gt; [1] "small_target" "sqrt"        </div><div class='input'><span class='fu'><a href='readd.html'>readd</a></span>(<span class='no'>small_target</span>, <span class='kw'>cache</span> <span class='kw'>=</span> <span class='no'>cache</span>)</div><div class='output co'>#&gt; [1] 3.414214</div><div class='input'><span class='co'># local_object only applies to the code chunk.</span>
<span class='fu'>ls</span>() <span class='co'># your environment is protected (local_object not found)</span></div><div class='output co'>#&gt; [1] "cache"        "small_plan"   "small_target"</div><div class='input'><span class='fu'>rm</span>(<span class='no'>small_target</span>)
<span class='co'># For tighter control over commands, use the `list` argument.</span>
<span class='co'># Single quotes are file names, double quotes are oridinary strings.</span>
<span class='co'># To actually run the little example workflow below,</span>
<span class='co'># you need a file called `my_file.xlsx``</span>
<span class='co'># with an Excel sheet called `second_sheet`.</span>
<span class='co'># You also need to install the xlsx package.</span>
<span class='fu'>drake_plan</span>(
  <span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>c</span>(
    <span class='kw'>dataset</span> <span class='kw'>=</span> <span class='st'>"readxl::read_excel(path = 'my_file.xlsx', sheet = \"second_sheet\")"</span> <span class='co'># nolint</span>
  )
)</div><div class='output co'>#&gt;    target                                                           command
#&gt; 1 dataset readxl::read_excel(path = 'my_file.xlsx', sheet = "second_sheet")</div><div class='input'><span class='co'># Output targets can also be files,</span>
<span class='co'># but the target names must have single quotes around them.</span>
<span class='no'>mtcars_plan</span> <span class='kw'>&lt;-</span> <span class='fu'>drake_plan</span>(
  <span class='kw'>output_file.csv</span> <span class='kw'>=</span> <span class='fu'>write.csv</span>(<span class='no'>mtcars</span>, <span class='st'>"output_file.csv"</span>),
  <span class='kw'>file_targets</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>strings_in_dots</span> <span class='kw'>=</span> <span class='st'>"literals"</span>
)
<span class='no'>mtcars_plan</span></div><div class='output co'>#&gt;              target                              command
#&gt; 1 'output_file.csv' write.csv(mtcars, "output_file.csv")</div><div class='input'><span class='co'># make(mtcars_plan) # Would write output_file.csv. # nolint</span>
<span class='co'># In the free-form `...` argument</span>
<span class='co'># drake_plan() uses tidy evaluation to figure out your commands.</span>
<span class='co'># For example, it respects the quasiquotation operator `!!`</span>
<span class='co'># when it figures out what your code should be.</span>
<span class='co'># Suppress this with `tidy_evaluation = FALSE` or</span>
<span class='co'># with the `list` argument.</span>
<span class='no'>my_variable</span> <span class='kw'>&lt;-</span> <span class='fl'>5</span>
<span class='fu'>drake_plan</span>(
  <span class='kw'>a</span> <span class='kw'>=</span> !!<span class='no'>my_variable</span>,
  <span class='kw'>b</span> <span class='kw'>=</span> !!<span class='no'>my_variable</span> + <span class='fl'>1</span>,
  <span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>d</span> <span class='kw'>=</span> <span class='st'>"!!my_variable"</span>)
)</div><div class='output co'>#&gt;   target       command
#&gt; 1      a             5
#&gt; 2      b             6
#&gt; 3      d !!my_variable</div><div class='input'><span class='fu'>drake_plan</span>(
  <span class='kw'>a</span> <span class='kw'>=</span> !!<span class='no'>my_variable</span>,
  <span class='kw'>b</span> <span class='kw'>=</span> !!<span class='no'>my_variable</span> + <span class='fl'>1</span>,
  <span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>d</span> <span class='kw'>=</span> <span class='st'>"!!my_variable"</span>),
  <span class='kw'>tidy_evaluation</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</div><div class='output co'>#&gt;   target             command
#&gt; 1      a     !(!my_variable)
#&gt; 2      b !(!my_variable + 1)
#&gt; 3      d       !!my_variable</div><div class='input'># For instances of !! that remain unevaluated in the workflow plan,
# make() will run these commands in tidy fashion,
# evaluating the !! operator using the environment you provided.
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
